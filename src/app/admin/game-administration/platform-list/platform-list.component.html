<section class="index-page">
  <section class="filter">
    <form nz-form [formGroup]="filterForm" nzLayout="inline" (ngSubmit)="onSubmit($event)"
          (reset)="resetFilter($event)">
      <nz-form-item>
        <nz-form-label>平台名称</nz-form-label>
        <nz-form-control nzAllowClear>
          <input nz-input formControlName="platform" placeholder="平台名称">
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>平台等级</nz-form-label>
        <nz-form-control>
          <nz-select formControlName="platformLevel" nzAllowClear>
            <nz-option *ngFor="let status of platformLevelService.getFilterData()" [nzValue]="status.value"
                       [nzLabel]="status.text"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>平台状态</nz-form-label>
        <nz-form-control>
          <nz-select formControlName="platformStatus" nzAllowClear>
            <nz-option *ngFor="let status of platformStatusesService.getFilterData()" [nzValue]="status.value"
                       [nzLabel]="status.text"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item class="operations">
        <input type="submit" nz-button nzType="primary" value="查询"/>
        <input type="reset" nz-button value="重置"/>
      </nz-form-item>
    </form>
  </section>
  <!--<section class="operations">
    <app-platform-list-editor [isCreated]="true" (needUpdateList)="refreshList()"></app-platform-list-editor>
  </section>-->
  <section class="index-table">
    <nz-table #indexListTable nzShowSizeChanger [nzData]="records" [nzLoading]="isLoading" [nzTotal]="totalCount"
              [nzFrontPagination]="false"
              (nzPageIndexChange)="nzPageIndexChange($event)" [nzPageIndex]="pageIndex$ | async"
              nzShowQuickJumper [nzShowTotal]="totalTemplate">
      <thead>
      <tr>
        <th>序号</th>
        <th>平台名称</th>
        <th>平台图片</th>
        <th>平台等级</th>
        <th>平台状态</th>
        <th>在线人数</th>
<!--        <th nzWidth="150px">平台地址</th>-->
        <th>平台说明</th>
        <th>操作</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of indexListTable.data">
        <td>{{ data.priority }}</td>
        <td>{{ data.platform }}</td>
        <td>
          <app-table-image-preview [src]="data.imageUrl$ | async"></app-table-image-preview>
        </td>
        <td>{{ data.platformLevel }}</td>
        <td>{{ data.platformStatus }}</td>
        <td>{{ data.OnlineNumber }}</td>
<!--        <td>{{ data.platformUrl }}</td>-->
        <td>{{ data.platformInstruction }}</td>
        <td class="options">
          <app-table-operations>
            <app-platform-list-editor [listItem]="data" (needUpdateList)="refreshList()"></app-platform-list-editor>
            <nz-divider nzType="vertical"></nz-divider>
            <app-platform-rate-editor [listItem]="data" (needUpdateList)="refreshList()"></app-platform-rate-editor>
<!--            <nz-divider nzType="vertical"></nz-divider>-->
<!--            <app-table-operation-button (doTask)="remove($event, data)" type="delete">删除</app-table-operation-button>-->
          </app-table-operations>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </section>
  <ng-template #totalTemplate let-total>
        <span class="pagination-total">
            共 {{ total }} 条记录 第 {{ pageIndex$ | async }} / {{ pageCount }} 页
        </span>
  </ng-template>
</section>
